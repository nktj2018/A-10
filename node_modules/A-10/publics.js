module.exports={

	check:function(fpath){
		try{
			global.fs.statSync("./app/public"+fpath);
			return true;
		}catch(err){
			return false;
		}
	},
	load:function(fpath,response){

		var extension=fpath.split('.').pop();

		var content_type="text/plane";
		if(global.mime[extension]){
			content_type=global.mime[extension];
		}

		fs.readFile("./app/public"+fpath, function (err, data) {

			if(global.config.cache_limit){
				response.writeHead(200, {
					'Content-Type':content_type,
					"Cache-Control":"max-age="+global.config.cache_limit+",",
				});
			}
			else
			{
				response.writeHead(200, {
					'Content-Type':content_type,
				});
			}
			response.write(data);
			response.end();

		});
	},
};