module.exports=class Controller extends Objects{
	constructor(option){
		super();
		this.render=option.action;
		this.__sendViewdata=null;
	}
	settings(){}
	logic_before(){}
	logic_after(){}
	//setData
	setData(name,value){
		if(!this.__sendViewdata){
			this.__sendViewdata={};
		}
		this.__sendViewdata[name]=value;
	}
	__renderingings(res,output){

		if(!config.content_type){
			config.content_type="text/html";
		}
		if(!config.charset){
			config.charset="utf-8";
		}

		res.writeHead(200, {
			'Content-Type': config.content_type,
			'charset':config.charset
		});
		
		if(output!=undefined){
			res.write(output);
		}

		try{

			var elementPath="./app/Render/Element/";

			if(this.render){
				var renderPath="./app/Render/View/"+this.constructor.name.replace("_Controller","")+"/"+this.render+".view";
			}

			if(this.layout){
				if(this.render){
					var layoutPath="./app/Render/Layout/"+this.layout+".view";
					var view=new View(res,layoutPath,this.__sendViewdata,{
						mode:"layout",
						contentPath:renderPath,
						elementPath:elementPath
					});
				}
			}
			else
			{
				if(this.render){
					var view=new View(res,renderPath,this.__sendViewdata,{
						mode:"view",
						elementPath:elementPath
					});
				}
			}
		}catch(err){
			console.log(err);
		}
		res.end();

	}
}